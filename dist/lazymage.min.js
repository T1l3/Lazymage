angular.module("lazymage",[]),angular.module("lazymage").provider("lazymageRemote",function(){"use strict";var a=this;this.globalOptions={};var b={currentImage:{},defaultImage:{},errorImage:{},loader:'<span class="lazymage-loader">Preloading...</span>'};return this.$get=[function(){var c={};return angular.extend(b,a.globalOptions),c.globalOptions=b,c}],this}).directive("lazymage",["lazymageRemote",function(a){"use strict";return{restrict:"A",link:function(b,c,d){angular.isDefined(d.lazymageOptions)&&d.lazymageOptions&&angular.extend(a.globalOptions,b.$eval(d.lazymageOptions));var e=a.globalOptions,f=d.lazymage,g=function(a,b){void 0===b&&(b={}),a.attr(b),c.append(a)},h=function(){j&&j.remove(),k&&k.remove()};if((e.defaultImage.src||e.loader)&&c.html(""),e.defaultImage.src){var i=new Image;i.src=e.defaultImage.src;var j=jQuery(i);g(j,e.defaultImage.attrs)}if(e.loader){var k=jQuery(e.loader);c.append(k)}var l=new Image;l.onload=function(){g(jQuery(l),e.currentImage.attrs),h()},l.onerror=function(){e.errorImage.src&&(l.src=e.errorImage.src,g(jQuery(l),e.errorImage.attrs)),h()},l.src=f}}}]);