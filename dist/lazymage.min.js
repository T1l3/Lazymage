angular.module("lazymage",[]),angular.module("lazymage").provider("lazymageRemote",function(){"use strict";var a=this;this.globalOptions={};var b={currentImage:{attrs:{}},errorImage:{src:null,attrs:{}},defaultImage:{src:null,attrs:{},removeTimeout:0},loader:{html:'<span class="lazymage-loader">Preloading...</span>',removeTimeout:0}};return this.$get=[function(){var c={};return angular.extend(b,a.globalOptions),c.globalOptions=b,c}],this}).directive("lazymage",["lazymageRemote",function(a){"use strict";return{restrict:"A",link:function(b,c,d){c.addClass("lazymage-container");var e={};angular.extend(e,a.globalOptions),angular.isDefined(d.lazymageOptions)&&d.lazymageOptions&&angular.extend(e,b.$eval(d.lazymageOptions));var f=d.lazymage,g=function(a,b){void 0===b&&(b={}),a.attr(b),c.append(a)},h=function(){j&&void 0!==e.defaultImage.removeTimeout&&null!==e.defaultImage.removeTimeout&&setTimeout(function(){j.remove()},e.defaultImage.removeTimeout),k&&void 0!==e.loader.removeTimeout&&null!==e.loader.removeTimeout&&setTimeout(function(){k.remove()},e.loader.removeTimeout)};if((e.defaultImage.src||e.loader.html)&&c.html(""),e.defaultImage.src){var i=new Image;i.src=e.defaultImage.src;var j=jQuery(i);g(j,e.defaultImage.attrs)}if(e.loader.html){var k=jQuery(e.loader.html);c.append(k)}var l=new Image;l.onload=function(){c.addClass("lazymage-loaded"),g(jQuery(l),e.currentImage.attrs),h()},l.onerror=function(){c.addClass("lazymage-error"),e.errorImage.src&&(l.src=e.errorImage.src,g(jQuery(l),e.errorImage.attrs)),h()},l.src=f}}}]);